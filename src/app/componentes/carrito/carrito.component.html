<h2 class="titulo">Tu carrito</h2>

@if (items.length > 0) {
  <section class="carrito">
    @for (item of items; track item.detalleCarritoDTO.idEvento) {
      <mat-card class="carrito-item">
        <img mat-card-image [src]="item.imagenPortada" [alt]="'Imagen de ' + item.nombre" />

        <mat-card-content>
          <h3>{{ item.nombre }}</h3>
          <p><strong>Localidad:</strong> {{ item.detalleCarritoDTO.nombreLocalidad }}</p>
          <p><strong>Dirección:</strong> {{ item.direccion }}</p>
          <p><strong>Fecha:</strong> {{ item.fecha | date:'longDate' }}</p>
          <p><strong>Cantidad:</strong> {{ item.detalleCarritoDTO.cantidad }}</p>
        </mat-card-content>

        <mat-card-actions>
          <button mat-raised-button color="warn" (click)="eliminarItem(item)">
            <mat-icon>delete</mat-icon> Eliminar
          </button>
        </mat-card-actions>
      </mat-card>
    }

    <div class="resumen">
      <p><strong>Total ítems:</strong> {{ totalItems }}</p>
      <button mat-raised-button color="primary" (click)="procesarCompra()">
        Procesar compra
      </button>
    </div>
  </section>
} @else {
  <div class="carrito-vacio">
    <h3>Tu carrito está vacío</h3>
    <a routerLink="/eventos" mat-raised-button color="accent">
      <mat-icon>event</mat-icon> Ver eventos
    </a>
  </div>
}
